<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>hooks/useOnRenderBackgroundCallback.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-BodyPixCompositor.html">BodyPixCompositor</a></li><li><a href="module-renderBokehBackground.html">renderBokehBackground</a></li><li><a href="module-renderSolidColorBackground.html">renderSolidColorBackground</a></li><li><a href="module-renderUnprocessedVideo.html">renderUnprocessedVideo</a></li><li><a href="module-useBodyPix.html">useBodyPix</a></li><li><a href="module-useInterval.html">useInterval</a></li><li><a href="module-useOnRenderBackgroundCallback.html">useOnRenderBackgroundCallback</a></li><li><a href="module-useOnRenderForegroundCallback.html">useOnRenderForegroundCallback</a></li><li><a href="module-useVideoStream.html">useVideoStream</a></li><li><a href="module-VideoCompositor.html">VideoCompositor</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<div id="main">
    
    <h1 class="page-title">hooks/useOnRenderBackgroundCallback.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { NotImplementedError, NotSupportedError } from "common-errors";

import colorString from "color-string";
import isImagePath from "is-image";
import isVideoPath from "is-video";
import renderBokehBackground from "../functions/renderBokehBackground";
import renderSolidColorBackground from "../functions/renderSolidColorBackground";
import renderUnprocessedVideo from "../functions/renderUnprocessedVideo";
import { useCallback } from "react";

/**
 * Render a background.
 *
 * @module useOnRenderBackgroundCallback
 * @param {string|Object} background The type of background to use. Supports a CSS color string, `"blur"`, a path to an image or video file, or a reference to a `&lt;canvas />`, `&lt;img />`, or `&lt; video/>` element.
 * @param {*} bodyPix The BodyPix SDK.
 * @param {*} net The net loaded from BodyPix.
 */
export default function useOnRenderBackgroundCallback(
  background,
  bodyPix,
  net
) {
  return useCallback(
    (canvasElement, videoElement) => {
      try {
        const tagName = background?.current?.tagName;
        if (tagName) {
          if (tagName === "IMG") {
            throw new NotImplementedError(
              "Image element support is not yet implemented."
            );
          } else if (tagName === "VIDEO") {
            throw new NotImplementedError(
              "Video element support is not yet implemented."
            );
          } else if (tagName === "CANVAS") {
            throw new NotImplementedError(
              "Canvas element support is not yet implemented."
            );
          } else {
            throw new NotSupportedError(`&lt;${tagName.toLowerCase()} />`);
          }
        }

        if (typeof background === "string") {
          if (background === "blur") {
            return renderBokehBackground(
              3,
              bodyPix,
              canvasElement,
              1,
              net,
              videoElement
            );
          }

          if (isImagePath(background)) {
            throw new NotImplementedError(
              "Image path support is not yet implemented."
            );
          }

          if (isVideoPath(background)) {
            throw new NotImplementedError(
              "Video path support is not yet implemented."
            );
          }

          const backgroundColor = colorString.get.rgb(background);
          if (backgroundColor) {
            return renderSolidColorBackground(
              bodyPix,
              canvasElement,
              backgroundColor,
              net,
              videoElement
            );
          }
        }
      } catch (error) {
        console.error(error);
      }

      console.warn(
        "Falling back to default renderer; %s is not a valid background value.",
        background
      );

      renderUnprocessedVideo(canvasElement, videoElement);
    },
    [background, bodyPix, net]
  );
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Sun Apr 18 2021 11:21:05 GMT-0400 (Eastern Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
